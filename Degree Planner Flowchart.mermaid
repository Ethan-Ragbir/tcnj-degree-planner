graph TD
    %% Application Initialization
    A[ðŸš€ Application Start] --> B[ðŸ“‚ Load from localStorage]
    B --> C{ðŸ’¾ Data exists?}
    C -->|Yes| D[ðŸ“Š Load Data]
    C -->|No| E[ðŸ†• Initialize Defaults]
    D --> F[ðŸŽ¨ Render UI]
    E --> F
    F --> G[ðŸ“ˆ Render Statistics]
    G --> H[ðŸ—“ï¸ Render Planner]
    H --> I[ðŸ“š Render Courses]
    I --> J[ðŸ“… Initialize Calendar]
    J --> K[âœ¨ Application Ready]
    
    %% User Interactions Hub
    K --> L{ðŸŽ¯ User Actions}
    
    %% Course Management
    L --> M[ðŸ“š Course Management]
    M --> M1[âž• Add Course]
    M --> M2[âœï¸ Edit Course]
    M --> M3[ðŸ—‘ï¸ Delete Course]
    M --> M4[âœ… Toggle Complete]
    M --> M5[ðŸ”„ Drag Drop]
    
    %% Add Course Flow
    M1 --> M1A[ðŸ‘† Click Add Button]
    M1A --> M1B[ðŸ“‹ Open Modal]
    M1B --> M1C[ðŸ“ Fill Details]
    M1C --> M1D[ðŸ” Validate]
    M1D --> M1E{âœ… Valid?}
    M1E -->|No| M1C
    M1E -->|Yes| M1F[ðŸ’¾ Save Course]
    M1F --> M1G[ðŸŽ¨ Render Card]
    M1G --> M1H[ðŸ“Š Update Stats]
    M1H --> M1I[ðŸ’¾ Persist Data]
    M1I --> M1J[ðŸ“… Update Calendar]
    M1J --> M1K[â˜ï¸ Sync Google]
    M1K --> M1L[âŒ Close Modal]
    
    %% Edit Course Flow
    M2 --> M2A[âœï¸ Click Edit]
    M2A --> M2B[ðŸ“‚ Load Data]
    M2B --> M2C[ðŸ“‹ Open Modal]
    M2C --> M2D[âœï¸ Modify]
    M2D --> M2E[ðŸ” Validate]
    M2E --> M2F{âœ… Valid?}
    M2F -->|No| M2D
    M2F -->|Yes| M2G[ðŸ’¾ Update Data]
    M2G --> M2H[ðŸŽ¨ Update Display]
    M2H --> M2I[ðŸ“Š Update Stats]
    M2I --> M2J[ðŸ’¾ Persist]
    M2J --> M2K[ðŸ“… Update Calendar]
    M2K --> M2L[âŒ Close Modal]
    
    %% Delete Course Flow
    M3 --> M3A[ðŸ—‘ï¸ Click Delete]
    M3A --> M3B{âš ï¸ Confirm?}
    M3B -->|No| K
    M3B -->|Yes| M3C[ðŸ’¾ Remove Data]
    M3C --> M3D[ðŸŽ¨ Remove Card]
    M3D --> M3E[ðŸ“Š Update Stats]
    M3E --> M3F[ðŸ’¾ Persist]
    M3F --> M3G[ðŸ“… Update Calendar]
    
    %% Toggle Complete Flow
    M4 --> M4A[â˜‘ï¸ Click Checkbox]
    M4A --> M4B[ðŸ”„ Toggle Status]
    M4B --> M4C[ðŸŽ¨ Update Visual]
    M4C --> M4D[ðŸ“Š Update Stats]
    M4D --> M4E[ðŸ’¾ Persist]
    M4E --> M4F[ðŸ“… Update Calendar]
    
    %% Drag Drop Flow
    M5 --> M5A[ðŸ–±ï¸ Start Drag]
    M5A --> M5B[ðŸ“Œ Set Target]
    M5B --> M5C[ðŸ‘† Drag Over]
    M5C --> M5D[ðŸ“ Drop]
    M5D --> M5E[âž– Remove Old]
    M5E --> M5F[âž• Add New]
    M5F --> M5G[ðŸ“Š Update Stats]
    M5G --> M5H[ðŸ’¾ Persist]
    M5H --> M5I[ðŸ“… Update Calendar]
    
    %% Statistics and Progress
    L --> N[ðŸ“Š Statistics]
    N --> N1[ðŸ”¢ Total Credits]
    N --> N2[âœ… Completed Credits]
    N --> N3[âš›ï¸ Physics Core]
    N --> N4[ðŸ”¢ Math Minor]
    N --> N5[ðŸŽ¯ Progress Ring]
    N --> N6[ðŸ“ˆ Year Progress]
    N --> N7[ðŸ“‹ Semester Stats]
    
    %% Calendar Management
    L --> O[ðŸ“… Calendar]
    O --> O1[ðŸ“‹ Select Semester]
    O1 --> O2[ðŸŽ¯ Generate Events]
    O2 --> O3[ðŸ” Parse Schedules]
    O3 --> O4[ðŸ“… Create Events]
    O4 --> O5[ðŸŽ¨ Render Calendar]
    O5 --> O6[ðŸ”„ Handle Views]
    
    %% Settings and Export
    L --> P[âš™ï¸ Settings]
    P --> P1[ðŸŽ›ï¸ Toggle Panel]
    P --> P2[ðŸŽ¨ Change Theme]
    P --> P3[ðŸ“¤ Export Data]
    P --> P4[â˜ï¸ Google Sync]
    
    %% Theme Management
    P2 --> P2A[ðŸŽ¨ Select Theme]
    P2A --> P2B{ðŸŒ™ Dark Mode?}
    P2B -->|Yes| P2C[ðŸŒ™ Apply Dark]
    P2B -->|No| P2D[â˜€ï¸ Apply Light]
    P2C --> P2E[ðŸ“… Update Calendar]
    P2D --> P2E
    
    %% Export Management
    P3 --> P3A[ðŸ“‹ Select Format]
    P3A --> P3B{ðŸ“„ Format?}
    P3B -->|PDF| P3C[ðŸ“„ Generate PDF]
    P3B -->|CSV| P3D[ðŸ“Š Generate CSV]
    P3B -->|Calendar| P3E[â˜ï¸ Google Sync]
    
    %% Google Calendar Sync
    P4 --> P4A[ðŸ”‘ Initialize API]
    P4A --> P4B[ðŸ‘¤ Authenticate]
    P4B --> P4C[ðŸ“… Generate Events]
    P4C --> P4D[â˜ï¸ Create Events]
    
    %% Major Management
    L --> Q[ðŸŽ“ Major Management]
    Q --> Q1[ðŸ‘† Click Save Major]
    Q1 --> Q2[ðŸ“‹ Open Modal]
    Q2 --> Q3[âœï¸ Enter Name]
    Q3 --> Q4[ðŸ” Validate]
    Q4 --> Q5{âœ… Valid?}
    Q5 -->|No| Q3
    Q5 -->|Yes| Q6[ðŸ’¾ Update Major]
    Q6 --> Q7[ðŸŽ¨ Update Display]
    Q7 --> Q8[ðŸ’¾ Persist]
    Q8 --> Q9[âŒ Close Modal]
    
    %% UI Interactions
    L --> R[ðŸŽ¨ UI Controls]
    R --> R1[ðŸ“… Toggle Years]
    R --> R2[ðŸ“‹ Toggle Semesters]
    R --> R3[ðŸ“‹ Modal Management]
    R --> R4[âœ¨ Hover Effects]
    R --> R5[ðŸ“± Responsive Design]
    
    %% Data Persistence
    M1I --> S[ðŸ’¾ Data Storage]
    M2J --> S
    M3F --> S
    M4E --> S
    M5H --> S
    Q8 --> S
    S --> S1[ðŸ’¾ Semester Courses]
    S --> S2[ðŸ’¾ Available Courses]
    S --> S3[ðŸ’¾ Current Major]
    
    %% Error Handling
    M1D --> T{âš ï¸ Errors?}
    M2E --> T
    Q4 --> T
    T -->|Yes| T1[ðŸš¨ Show Error]
    T1 --> T2[ðŸŽ¯ Highlight Fields]
    T2 --> T3[ðŸ›‘ Prevent Submit]
    
    %% Calendar Engine
    O2 --> U[âš™ï¸ Event Engine]
    U --> U1[ðŸ“š Get Courses]
    U1 --> U2[ðŸ” Parse Schedule]
    U2 --> U3[ðŸ“… Calculate Dates]
    U3 --> U4[ðŸ”„ Generate Recurring]
    U4 --> U5[ðŸŽ¨ Apply Styling]
    
    %% Styling
    classDef initFlow fill:#003A74,stroke:#001845,stroke-width:3px,color:#ffffff
    classDef readyState fill:#FDBB30,stroke:#e6a700,stroke-width:3px,color:#003A74
    classDef courseFlow fill:#10b981,stroke:#059669,stroke-width:2px,color:#ffffff
    classDef addFlow fill:#34d399,stroke:#10b981,stroke-width:2px,color:#ffffff
    classDef editFlow fill:#f97316,stroke:#ea580c,stroke-width:2px,color:#ffffff
    classDef deleteFlow fill:#ef4444,stroke:#dc2626,stroke-width:2px,color:#ffffff
    classDef completeFlow fill:#8b5cf6,stroke:#7c3aed,stroke-width:2px,color:#ffffff
    classDef dragFlow fill:#06b6d4,stroke:#0891b2,stroke-width:2px,color:#ffffff
    classDef statsFlow fill:#FDBB30,stroke:#e6a700,stroke-width:2px,color:#92400e
    classDef calendarFlow fill:#6366f1,stroke:#4f46e5,stroke-width:2px,color:#ffffff
    classDef settingsFlow fill:#6b7280,stroke:#4b5563,stroke-width:2px,color:#ffffff
    classDef majorFlow fill:#ec4899,stroke:#db2777,stroke-width:2px,color:#ffffff
    classDef uiFlow fill:#14b8a6,stroke:#0d9488,stroke-width:2px,color:#ffffff
    classDef dataFlow fill:#1e40af,stroke:#1e3a8a,stroke-width:2px,color:#ffffff
    classDef errorFlow fill:#dc2626,stroke:#991b1b,stroke-width:2px,color:#ffffff
    classDef engineFlow fill:#7c3aed,stroke:#6d28d9,stroke-width:2px,color:#ffffff
    
    class A,B,C,D,E,F,G,H,I,J initFlow
    class K,L readyState
    class M courseFlow
    class M1,M1A,M1B,M1C,M1D,M1E,M1F,M1G,M1H,M1I,M1J,M1K,M1L addFlow
    class M2,M2A,M2B,M2C,M2D,M2E,M2F,M2G,M2H,M2I,M2J,M2K,M2L editFlow
    class M3,M3A,M3B,M3C,M3D,M3E,M3F,M3G deleteFlow
    class M4,M4A,M4B,M4C,M4D,M4E,M4F completeFlow
    class M5,M5A,M5B,M5C,M5D,M5E,M5F,M5G,M5H,M5I dragFlow
    class N,N1,N2,N3,N4,N5,N6,N7 statsFlow
    class O,O1,O2,O3,O4,O5,O6 calendarFlow
    class P,P1,P2,P3,P4,P2A,P2B,P2C,P2D,P2E,P3A,P3B,P3C,P3D,P3E,P4A,P4B,P4C,P4D settingsFlow
    class Q,Q1,Q2,Q3,Q4,Q5,Q6,Q7,Q8,Q9 majorFlow
    class R,R1,R2,R3,R4,R5 uiFlow
    class S,S1,S2,S3 dataFlow
    class T,T1,T2,T3 errorFlow
    class U,U1,U2,U3,U4,U5 engineFlow